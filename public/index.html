<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pet List</title>
</head>
<body>
    <h3>Pet List</h3>
    <form>
        <input type="text" placeholder="type pet name here..." />
        <input type="submit" />
      </form>
      
      <section></section>
      <br>
      <br>

      <button id="jokeButton">Click for Joke</button>
      <div class="joke-container"></div>

      <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.21.1/axios.min.js"></script>
      <script>
        const addForm = document.querySelector("form");
        const petInput = document.querySelector("input");
        const container = document.querySelector("section");
        const jokeButton = document.querySelector("#joke-button")
        const jokeContainer = document.querySelector(".joke-container")
  
        function submitHandler(e) {
          e.preventDefault();
          axios
            .post("/api/pet", { name: petInput.value })
            .then((res) => {
              container.innerHTML = "";
  
              res.data.forEach((petName) => {
                container.innerHTML += `<p>${petName}</p>`;
              });
            })
            .catch((err) => console.log(err));
        }
        
        function getAllPets(){
            axios
                .get('/api/pets')
                .then((res) => {
                    console.log(res.data)
            })
            .catch((err) => console.log(err));
            rollbar.error('Crash while calling bad function');
        }

    //     function getPets(e){
    //     axios
    //     .post('/api/pets', { name: petInput.value })
    //     .then(function (res) {
    //         const joke = res.data.value
    //         jokeContainer.textContent = joke
    //         rollbar.error('things are trash')
    //     })
    // }
        // getAllPets()

        addForm.addEventListener("submit", submitHandler);
        jokeButton.addEventListener("click", getAllPets)


          }  
          </script>
</body>
</html>